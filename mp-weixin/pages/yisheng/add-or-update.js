(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/yisheng/add-or-update"],{"005c":function(e,i,t){"use strict";(function(e){t("6cdc"),t("921b");n(t("66fd"));var i=n(t("20cc"));function n(e){return e&&e.__esModule?e:{default:e}}e(i.default)}).call(this,t("543d")["createPage"])},"1cf3":function(e,i,t){"use strict";var n=t("f931"),r=t.n(n);r.a},"20cc":function(e,i,t){"use strict";t.r(i);var n=t("66ad"),r=t("bee7");for(var a in r)"default"!==a&&function(e){t.d(i,e,(function(){return r[e]}))}(a);t("1cf3");var s,u=t("f0c5"),o=Object(u["a"])(r["default"],n["b"],n["c"],!1,null,"7dfa5852",null,!1,n["a"],s);i["default"]=o.exports},"66ad":function(e,i,t){"use strict";var n={"xia-editor":()=>t.e("components/xia-editor/xia-editor").then(t.bind(null,"064f"))},r=function(){var e=this,i=e.$createElement,t=(e._self._c,e.ruleForm.keshitupian.split(","));e.$mp.data=Object.assign({},{$root:{g0:t}})},a=[];t.d(i,"b",(function(){return r})),t.d(i,"c",(function(){return a})),t.d(i,"a",(function(){return n}))},bdd6:function(e,i,t){"use strict";(function(e){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=r(t("a34a"));function r(e){return e&&e.__esModule?e:{default:e}}function a(e,i,t,n,r,a,s){try{var u=e[a](s),o=u.value}catch(c){return void t(c)}u.done?i(o):Promise.resolve(o).then(n,r)}function s(e){return function(){var i=this,t=arguments;return new Promise((function(n,r){var s=e.apply(i,t);function u(e){a(s,n,r,u,o,"next",e)}function o(e){a(s,n,r,u,o,"throw",e)}u(void 0)}))}}var u=function(){return Promise.all([t.e("common/vendor"),t.e("components/w-picker/w-picker")]).then(t.bind(null,"e2b1"))},o=function(){return t.e("components/xia-editor/xia-editor").then(t.bind(null,"064f"))},c={data:function(){return{cross:"",ruleForm:{yishengbianhao:"",mima:"",yishengxingming:"",xingbie:"",keshimingcheng:"",zhicheng:"",lianxidianhua:"",keshijianjie:"",keshitupian:"",money:""},xingbieOptions:[],xingbieIndex:0,keshimingchengOptions:[],keshimingchengIndex:0,user:{},ro:{yishengbianhao:!1,mima:!1,yishengxingming:!1,xingbie:!1,keshimingcheng:!1,zhicheng:!1,lianxidianhua:!1,keshijianjie:!1,keshitupian:!1,money:!1}}},components:{wPicker:u,xiaEditor:o},computed:{baseUrl:function(){return this.$base.url}},onLoad:function(){var i=s(n.default.mark((function i(t){var r,a,s,u;return n.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return r=e.getStorageSync("nowTable"),i.next=3,this.$api.session(r);case 3:return a=i.sent,this.user=a.data,this.xingbieOptions="男,女".split(","),i.next=8,this.$api.option("keshimingcheng","keshimingcheng",{});case 8:if(a=i.sent,this.keshimingchengOptions=a.data,this.keshimingchengOptions.unshift("请选择科室名称"),this.ruleForm.userid=e.getStorageSync("userid"),t.refid&&(this.ruleForm.refid=t.refid,this.ruleForm.nickname=e.getStorageSync("nickname")),!t.id){i.next=19;break}return this.ruleForm.id=t.id,i.next=17,this.$api.info("yisheng",this.ruleForm.id);case 17:a=i.sent,this.ruleForm=a.data;case 19:if(this.cross=t.cross,!t.cross){i.next=67;break}s=e.getStorageSync("crossObj"),i.t0=n.default.keys(s);case 23:if((i.t1=i.t0()).done){i.next=67;break}if(u=i.t1.value,"yishengbianhao"!=u){i.next=29;break}return this.ruleForm.yishengbianhao=s[u],this.ro.yishengbianhao=!0,i.abrupt("continue",23);case 29:if("mima"!=u){i.next=33;break}return this.ruleForm.mima=s[u],this.ro.mima=!0,i.abrupt("continue",23);case 33:if("yishengxingming"!=u){i.next=37;break}return this.ruleForm.yishengxingming=s[u],this.ro.yishengxingming=!0,i.abrupt("continue",23);case 37:if("xingbie"!=u){i.next=41;break}return this.ruleForm.xingbie=s[u],this.ro.xingbie=!0,i.abrupt("continue",23);case 41:if("keshimingcheng"!=u){i.next=45;break}return this.ruleForm.keshimingcheng=s[u],this.ro.keshimingcheng=!0,i.abrupt("continue",23);case 45:if("zhicheng"!=u){i.next=49;break}return this.ruleForm.zhicheng=s[u],this.ro.zhicheng=!0,i.abrupt("continue",23);case 49:if("lianxidianhua"!=u){i.next=53;break}return this.ruleForm.lianxidianhua=s[u],this.ro.lianxidianhua=!0,i.abrupt("continue",23);case 53:if("keshijianjie"!=u){i.next=57;break}return this.ruleForm.keshijianjie=s[u],this.ro.keshijianjie=!0,i.abrupt("continue",23);case 57:if("keshitupian"!=u){i.next=61;break}return this.ruleForm.keshitupian=s[u].split(",")[0],this.ro.keshitupian=!0,i.abrupt("continue",23);case 61:if("money"!=u){i.next=65;break}return this.ruleForm.money=s[u],this.ro.money=!0,i.abrupt("continue",23);case 65:i.next=23;break;case 67:this.styleChange();case 68:case"end":return i.stop()}}),i,this)})));function t(e){return i.apply(this,arguments)}return t}(),methods:{keshijianjieChange:function(e){this.ruleForm.keshijianjie=e},styleChange:function(){this.$nextTick((function(){}))},xingbieChange:function(e){this.xingbieIndex=e.target.value,this.ruleForm.xingbie=this.xingbieOptions[this.xingbieIndex]},keshimingchengChange:function(e){this.keshimingchengIndex=e.target.value,this.ruleForm.keshimingcheng=this.keshimingchengOptions[this.keshimingchengIndex]},keshitupianTap:function(){var e=this;this.$api.upload((function(i){e.ruleForm.keshitupian="upload/"+i.file,e.$forceUpdate(),e.$nextTick((function(){e.styleChange()}))}))},getUUID:function(){return(new Date).getTime()},onSubmitTap:function(){var i=s(n.default.mark((function i(){var t,r,a,s,u,o,c,h,g,l;return n.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(this.ruleForm.yishengbianhao){i.next=3;break}return this.$utils.msg("医生编号不能为空"),i.abrupt("return");case 3:if(this.ruleForm.mima){i.next=6;break}return this.$utils.msg("密码不能为空"),i.abrupt("return");case 6:if(this.ruleForm.yishengxingming){i.next=9;break}return this.$utils.msg("医生姓名不能为空"),i.abrupt("return");case 9:if(!this.ruleForm.lianxidianhua||this.$validate.isMobile(this.ruleForm.lianxidianhua)){i.next=12;break}return this.$utils.msg("联系电话应输入手机格式"),i.abrupt("return");case 12:if(!this.ruleForm.money||this.$validate.isNumber(this.ruleForm.money)){i.next=15;break}return this.$utils.msg("余额应输入数字"),i.abrupt("return");case 15:if(!this.cross){i.next=31;break}if(u=e.getStorageSync("statusColumnName"),o=e.getStorageSync("statusColumnValue"),""==u){i.next=31;break}if(t||(t=e.getStorageSync("crossObj")),u.startsWith("[")){i.next=27;break}for(c in t)c==u&&(t[c]=o);return h=e.getStorageSync("crossTable"),i.next=25,this.$api.update("".concat(h),t);case 25:i.next=31;break;case 27:r=Number(e.getStorageSync("userid")),a=t["id"],s=e.getStorageSync("statusColumnName"),s=s.replace(/\[/,"").replace(/\]/,"");case 31:if(!a||!r){i.next=53;break}return this.ruleForm.crossuserid=r,this.ruleForm.crossrefid=a,g={page:1,limit:10,crossuserid:r,crossrefid:a},i.next=37,this.$api.list("yisheng",g);case 37:if(l=i.sent,!(l.data.total>=s)){i.next=43;break}return this.$utils.msg(e.getStorageSync("tips")),i.abrupt("return",!1);case 43:if(!this.ruleForm.id){i.next=48;break}return i.next=46,this.$api.update("yisheng",this.ruleForm);case 46:i.next=50;break;case 48:return i.next=50,this.$api.add("yisheng",this.ruleForm);case 50:this.$utils.msgBack("提交成功");case 51:i.next=61;break;case 53:if(!this.ruleForm.id){i.next=58;break}return i.next=56,this.$api.update("yisheng",this.ruleForm);case 56:i.next=60;break;case 58:return i.next=60,this.$api.add("yisheng",this.ruleForm);case 60:this.$utils.msgBack("提交成功");case 61:case"end":return i.stop()}}),i,this)})));function t(){return i.apply(this,arguments)}return t}(),optionsChange:function(e){this.index=e.target.value},bindDateChange:function(e){this.date=e.target.value},getDate:function(e){var i=new Date,t=i.getFullYear(),n=i.getMonth()+1,r=i.getDate();return"start"===e?t-=60:"end"===e&&(t+=2),n=n>9?n:"0"+n,r=r>9?r:"0"+r,"".concat(t,"-").concat(n,"-").concat(r)},toggleTab:function(e){this.$refs[e].show()}}};i.default=c}).call(this,t("543d")["default"])},bee7:function(e,i,t){"use strict";t.r(i);var n=t("bdd6"),r=t.n(n);for(var a in n)"default"!==a&&function(e){t.d(i,e,(function(){return n[e]}))}(a);i["default"]=r.a},f931:function(e,i,t){}},[["005c","common/runtime","common/vendor"]]]);